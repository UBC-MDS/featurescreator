<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to featurescreator • featurescreator</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to featurescreator">
<meta property="og:description" content="featurescreator">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">featurescreator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/featurescreator-vignette.html">Introduction to featurescreator</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to featurescreator</h1>
            
      
      
      <div class="hidden name"><code>featurescreator-vignette.Rmd</code></div>

    </div>

    
    
<p><code>featurescreator</code> is a package for creating features that capture important trends in data. It can be used in telecommunications, finance, or any other domain where time-based patterns in data are required.</p>
<p>For example, a telecommunications operator, wants to prevent churn by predicting which subscribers’ revenue will decline next month so that it can devise strategies to retain those customers. This type of prediction task necessitates the creation of a large number of features that capture trends in data over a period of several months for various dimensions such as recharge, revenue, number of complaints, network usage, number of active days, and so on. This package will assist them in developing features such as standard deviation for the previous n months, average for the previous n months, percentage change from m - 2 to m-1, and so on.</p>
<div class="section level2">
<h2 id="import-library">Import library<a class="anchor" aria-label="anchor" href="#import-library"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">featurescreator</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">example_data</span> <span class="op">=</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>
        subscriber_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,
        data_usage1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">3</span><span class="op">)</span>,  <span class="co"># 1 represent data usage in prediction month (m) - 1</span>
        data_usage2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>,  <span class="co"># m - 2</span>
        data_usage3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span><span class="op">)</span>,  <span class="co"># m - 3</span>
        data_usage4 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">12</span><span class="op">)</span>, <span class="co"># m - 4</span>
        data_usage5 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">14</span>, <span class="fl">15</span><span class="op">)</span>,  <span class="co"># m - 5</span>
        othercolumn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>,  <span class="co"># Other example column</span>
        data_usage_string6 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>  <span class="co"># Other example column with an integer</span>
    <span class="op">)</span>

<span class="va">example_data</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 8</span></span>
<span class="co">#&gt;   subscriber_id data_usage1 data_usage2 data_usage3 data_usage4 data_usage5</span>
<span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span>             1          10           4           7          10          13</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span>             2           5           5           8          11          14</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span>             3           3           6           9          12          15</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 2 more variables: othercolumn &lt;dbl&gt;, data_usage_string6 &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get_matching_column_names">get_matching_column_names<a class="anchor" aria-label="anchor" href="#get_matching_column_names"></a>
</h2>
<p>This function returns a list of matching columns given a column pattern.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu">featurescreator</span><span class="fu">::</span><span class="fu"><a href="../reference/get_matching_column_names.html">get_matching_column_names</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="st">"data_usage"</span><span class="op">)</span>
<span class="co">#&gt; [1] "data_usage1" "data_usage2" "data_usage3" "data_usage4" "data_usage5"</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculate_standard_deviation">calculate_standard_deviation<a class="anchor" aria-label="anchor" href="#calculate_standard_deviation"></a>
</h2>
<p>This function computes the standard deviation of each subscriber’s data usage over all recorded months (rowwise). It takes two arguments: the dataframe to use and the pattern to match. The pattern to match is the prefix of the column name of interest not including the incrementing integer at the end.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">featurescreator</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_standard_deviation.html">calculate_standard_deviation</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="st">"data_usage"</span><span class="op">)</span>
<span class="co">#&gt; [1] 2.792848 3.193744 3.872983</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculate_average">calculate_average<a class="anchor" aria-label="anchor" href="#calculate_average"></a>
</h2>
<p>This function computes the average of each subscriber’s data usage over all recorded months (rowwise). It takes two arguments: the dataframe to use and the pattern to match. The pattern to match is the prefix of the column name of interest not including the incrementing integer at the end.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">featurescreator</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_average.html">calculate_average</a></span><span class="op">(</span>
  <span class="va">example_data</span>,
  <span class="st">"data_usage"</span>
<span class="op">)</span>
<span class="co">#&gt; [1] 8.8 8.6 9.0</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="calculate_percentage_change">calculate_percentage_change<a class="anchor" aria-label="anchor" href="#calculate_percentage_change"></a>
</h2>
<p>The <code>calculate_percentage_change</code> function aims to generate new features to capture trends over time for a given comparison period. The <code>compare_period</code> argument is used to indicate which time periods to compare. For example, if we set it to <code>(1, 1)</code>, the function calculates the percent change from the last month data usage (data_usage1), to the month before that (data_usage2).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">featurescreator</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_percentage_change.html">calculate_percentage_change</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="st">"data_usage"</span>,
  compare_period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; [1] 150   0 -50</span></code></pre></div>
<p>Create percentage change of data usage in last 2 months (<code>data_usage1</code>, <code>data_usage2</code>) versus previous 2 months (<code>data_usage3</code>, <code>data_usage4</code>) by setting <code>compare_period=(2, 2)</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">featurescreator</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_percentage_change.html">calculate_percentage_change</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="st">"data_usage"</span>,
  compare_period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; [1] -17.64706 -47.36842 -57.14286</span></code></pre></div>
<p>Create percentage change of data usage in last 2 months (<code>data_usage1</code>, <code>data_usage2</code>) versus previous 3 months (<code>data_usage3</code>, <code>data_usage4</code>, <code>data_usage5</code>) by setting <code>compare_period=(2, 3)</code>. Comparison periods are brought to the same scales for a fare comparison.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">featurescreator</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_percentage_change.html">calculate_percentage_change</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="st">"data_usage"</span>,
  compare_period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; [1] -30.00000 -54.54545 -62.50000</span></code></pre></div>
<p>To capture percentage changes for few particular months, a <code>time_filter</code> can be specified. Create percentage change of data usage in <code>m - 2</code> and <code>m - 3</code> (that is <code>data_usage2</code> and <code>data_usage3</code>) versus <code>m - 4</code> and <code>m - 5</code> (that is <code>data_usage4</code> and <code>data_usage5</code>) where m is the prediction month.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">featurescreator</span><span class="fu">::</span><span class="fu"><a href="../reference/calculate_percentage_change.html">calculate_percentage_change</a></span><span class="op">(</span><span class="va">example_data</span>, <span class="st">"data_usage"</span>,
  compare_period <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>,
  time_filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; [1] -52.17391 -48.00000 -44.44444</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rakesh Pandey.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
